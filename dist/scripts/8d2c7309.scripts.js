"use strict";angular.module("socialiteApp",["ngCookies","ngResource","ngSanitize","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/settings",{templateUrl:"views/settings.html",controller:"SettingsCtrl"}).otherwise({redirectTo:"/"})}]).run(["$http","$rootScope",function(){}]),angular.module("socialiteApp").controller("MainCtrl",["$scope","$rootScope","feedServices","$interval",function(a,b,c,d){var e=0;c.update(),d(function(){c.update()},1e4),d(function(){e>=b.feeds.length&&(e=0),b.currentStatus=b.feeds[e],e++},3e3)}]),angular.module("socialiteApp").factory("twitter",["$http","$rootScope","$q",function(a,b,c){function d(){var b=c.defer();return a.get(e).success(b.resolve).error(b.reject),b.promise}var e="http://socialite-server.herokuapp.com/twitter";return{getResults:d}}]),angular.module("socialiteApp").controller("SettingsCtrl",["$scope","twitter",function(a,b){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],a.twitterAuthenticate=function(){console.log(a.twitter.secretKey),b.authenticate()}}]),angular.module("socialiteApp").factory("feedServices",["$rootScope","twitter","instagram",function(a,b,c){function d(a){for(var b,c=a.statuses,d=[],e=0;5>e;e++)b={username:c[e].user.screen_name,id:c[e].id,text:c[e].text,time:Date.parse(c[e].created_at)/1e3,source:"twitter"},d.unshift(b);return d}function e(a){for(var b,c=a.data,d=[],e=0;5>e;e++)c[e].caption.text.length>140&&(c[e].caption.text=c[e].caption.text.substring(0,138)+"..."),b={username:c[e].user.username,id:c[e].id,text:c[e].caption.text.substring(0,140),image:{url:c[e].images.standard_resolution.url},time:parseInt(c[e].created_time),source:"instagram"},d.unshift(b);return d}function f(){b.getResults().then(d).then(h)}function g(){c.getResults().then(e).then(h)}function h(b){for(var c=0;c<b.length;c++)_.findWhere(a.feeds,{id:b[c].id})||a.feeds.push(b[c]);a.feeds.sort(function(a,b){return b.time-a.time}),a.feeds.slice(0,10)}function i(){f(),g()}return a.feeds=[],{update:i}}]),angular.module("socialiteApp").factory("instagram",["$rootScope","$q","$http",function(a,b,c){function d(){var a=b.defer();return c.get(e).success(a.resolve).error(a.reject),a.promise}var e="http://socialite-server.herokuapp.com/instagram";return{getResults:d}}]);